!function(a){"use strict";a.fn.zoomingBox=function(b){var c=a.extend(!0,{},a.fn.zoomingBox.defaults,b);this.click(function(b){function d(){return m+1>=l.length?m=0:m+=1,a(".zoomingBox-xl").attr("src",l[m].href),!1}function e(){return 0>=m?m=l.length-1:m-=1,a(".zoomingBox-xl").attr("src",l[m].href),!1}var f,g,h,i,j,k,l,m,n,o=this,p=this.href,q=this.rel;if(b.preventDefault(),c.onStart.call(this),f="height"===c.imageResize?'<div id="zoomingBox-content">':'<div id="zoomingBox-content" style="max-width:'+c.containerWidth+"; height:"+c.containerHeight+'">',k='<img class="zoomingBox-xl" src="'+p+'" />',c.thumbnails?(g="vertical"===c.thumbnailPosition?"zThumbsVertical":"zThumbsHorizontal",i="zoomingBox-img",j='<div id="zoomingBox"><div id="zoomingBox-overlay"></div>'+f+'<div id="zoomingBox-img"></div><div id="zoomingBox-thumbs" class="'+g+'"></div></div></div>'):(i="zoomingBox-content",j='<div id="zoomingBox"><div id="zoomingBox-overlay"></div>'+f+"</div></div>"),a("body").append(j),"height"===c.imageResize?(n=.9*a(window).height(),k='<img class="zoomingBox-xl" src="'+p+'" style="max-height:'+n+'px" />'):k="width"===c.imageResize?'<img class="zoomingBox-xl" src="'+p+'" style="max-width:100%" />':'<img class="zoomingBox-xl" src="'+p+'"/>',a("#"+i).append(k),q&&c.nav&&(l=a('a[rel="'+q+'"]'),l.length>1)){h='<a href="#" class="zoomingBox-next">'+c.nextText+'</a><a href="#" class="zoomingBox-prev">'+c.prevText+"</a> ",a("#zoomingBox-content").append(h);for(var r=0;r<l.length;r++)o===l[r]&&(m=r)}if(a(document).keydown(function(a){37===a.keyCode?e():39===a.keyCode&&d()}),a(".zoomingBox-next").on("click",d),a(".zoomingBox-prev").on("click",e),c.thumbnails){if(q)l=a('a[rel="'+q+'"]'),l.each(function(){var b='<a href="'+this.href+'" class="zoomingBox-thumbs"><img src="'+this.href+'" alt=""/></a>';a("#zoomingBox-thumbs").append(b)});else{var s='<a href="'+this.href+'" class="zoomingBox-thumbs"><img src="'+this.href+'" alt=""/></a>';a("#zoomingBox-thumbs").append(s)}a(".zoomingBox-thumbs").on("click",function(b){b.preventDefault();var c=this.href;return a(".zoomingBox-xl").attr("src",c),!1})}if(c.closeButton){var t='<a href="#" class="close">'+c.closeText+"</a>";a("#zoomingBox-content").append(t)}a("#zoomingBox-overlay").css("background",c.overlayColor),a("#zoomingBox-overlay").fadeTo(0,c.overlayOpacity),a("#zoomingBox").fadeIn(c.speed),a(".zoomingBox-xl").on("mousemove",function(b){var d=a(".zoomingBox-xl").width(),e=a(".zoomingBox-xl").height(),f=a("#zoomingBox-content").width(),g=a("#zoomingBox-content").height(),h=a("#zoomingBox-content").offset(),i=b.pageX-h.left,j=b.pageY-h.top,k=Math.round(i/f*100)/100*(d-f),l=Math.round(j/g*100)/100*(e-g);"vertical"===c.zoom?a(".zoomingBox-xl").css("top","-"+l+"px"):"horizontal"===c.zoom?a(".zoomingBox-xl").css("left","-"+k+"px"):a(".zoomingBox-xl").css({top:"-"+l+"px",right:""+k+"px"})}),c.onComplete.call(this)}),a(document).on("click","#zoomingBox",function(){return c.onCleanup.call(this),a("#zoomingBox").remove(),c.onClose.call(this),!1}),a(document).keydown(function(b){return 27===b.keyCode?(c.onCleanup.call(this),a("#zoomingBox").remove(),c.onClose.call(this),!1):void 0})},a.fn.zoomingBox.defaults={zoom:"both",speed:800,thumbnails:!0,closeButton:!0,closeText:"x",thumbnailPosition:"vertical",onStart:function(){},onComplete:function(){},onCleanup:function(){},onClose:function(){},overlayColor:"#000000",overlayOpacity:"0.7",imageResize:null,containerWidth:"70%",containerHeight:"90%",nextText:"NEXT &gt;",prevText:"&lt; PREV",nav:!0}}(jQuery);