!function(a){a.fn.zoomingBox=function(b){var c=a.extend(!0,{},a.fn.zoomingBox.defaults,b);this.click(function(b){function d(){return q+1>=o.length?q=0:q+=1,a(".zoomingBox-xl").attr("src",o[q].href),!1}function e(){return 0>=q?q=o.length-1:q-=1,a(".zoomingBox-xl").attr("src",o[q].href),!1}var f=this;b.preventDefault(),c.onStart.call(this);var g=this.href,h=this.rel;if("height"==c.imageResize)var i='<div id="zoomingBox-content">';else var i='<div id="zoomingBox-content" style="max-width:'+c.containerWidth+"; height:"+c.containerHeight+'">';var j='<img class="zoomingBox-xl" src="'+g+'" />';if(c.thumbnails){if("vertical"==c.thumbnailPosition)var k="zThumbsVertical";else var k="zThumbsHorizontal";var l="zoomingBox-img",m='<div id="zoomingBox"><div id="zoomingBox-overlay"></div>'+i+'<div id="zoomingBox-img"></div><div id="zoomingBox-thumbs" class="'+k+'"></div></div></div>'}else var l="zoomingBox-content",m='<div id="zoomingBox"><div id="zoomingBox-overlay"></div>'+i+"</div></div>";if(a("body").append(m),"height"==c.imageResize)var n=.9*a(window).height(),j='<img class="zoomingBox-xl" src="'+g+'" style="max-height:'+n+'px" />';else if("width"==c.imageResize)var j='<img class="zoomingBox-xl" src="'+g+'" style="max-width:100%" />';else var j='<img class="zoomingBox-xl" src="'+g+'"/>';if(a("#"+l).append(j),h&&c.nav){var o=a('a[rel="'+h+'"]');if(o.length>1){var p='<a href="#" class="zoomingBox-next">'+c.nextText+'</a><a href="#" class="zoomingBox-prev">'+c.prevText+"</a> ";a("#zoomingBox-content").append(p);for(var q,r=0;r<o.length;r++)f==o[r]&&(q=r);a(document).keydown(function(a){37==a.keyCode?e():39==a.keyCode&&d()}),a(".zoomingBox-next").on("click",d),a(".zoomingBox-prev").on("click",e)}}if(c.thumbnails){if(h){var o=a('a[rel="'+h+'"]');o.each(function(){var b='<a href="'+this.href+'" class="zoomingBox-thumbs"><img src="'+this.href+'" alt=""/></a>';a("#zoomingBox-thumbs").append(b)})}else{var s='<a href="'+this.href+'" class="zoomingBox-thumbs"><img src="'+this.href+'" alt=""/></a>';a("#zoomingBox-thumbs").append(s)}a(".zoomingBox-thumbs").on("click",function(b){b.preventDefault();var c=this.href;return a(".zoomingBox-xl").attr("src",c),!1})}if(c.closeButton){var t='<a href="#" class="close">'+c.closeText+"</a>";a("#zoomingBox-content").append(t)}a("#zoomingBox-overlay").css("background",c.overlayColor),a("#zoomingBox-overlay").fadeTo(0,c.overlayOpacity),a("#zoomingBox").fadeIn(c.speed),a(".zoomingBox-xl").on("mousemove",function(b){var d=a(".zoomingBox-xl").width(),e=a(".zoomingBox-xl").height(),f=a("#zoomingBox-content").width(),g=a("#zoomingBox-content").height(),h=a("#zoomingBox-content").offset(),i=b.pageX-h.left,j=b.pageY-h.top,k=Math.round(i/f*100)/100*(d-f),l=Math.round(j/g*100)/100*(e-g);"vertical"==c.zoom?a(".zoomingBox-xl").css("top","-"+l+"px"):"horizontal"==c.zoom?a(".zoomingBox-xl").css("left","-"+k+"px"):a(".zoomingBox-xl").css({top:"-"+l+"px",right:""+k+"px"})}),c.onComplete.call(this)}),a(document).on("click","#zoomingBox",function(){return c.onCleanup.call(this),a("#zoomingBox").remove(),c.onClose.call(this),!1}),a(document).keydown(function(b){return 27==b.keyCode?(c.onCleanup.call(this),a("#zoomingBox").remove(),c.onClose.call(this),!1):void 0})},a.fn.zoomingBox.defaults={zoom:"both",speed:800,thumbnails:!0,closeButton:!0,closeText:"x",thumbnailPosition:"vertical",onStart:function(){},onComplete:function(){},onCleanup:function(){},onClose:function(){},overlayColor:"#000000",overlayOpacity:"0.7",imageResize:null,containerWidth:"70%",containerHeight:"90%",nextText:"NEXT &gt;",prevText:"&lt; PREV",nav:!0}}(jQuery);